<!DOCTYPE html>
<html>
  <head>
    <title>SoliTime</title>
  </head>
  <body>
    <h1>Configure SoliTime</h1>

    <p>Funtionality settings</p>
    <p>Vibrate on BT connection loss:
      <select id="vibrateonbt_select">
        <option value="on">On</option>
        <option value="off">Off</option>
      </select>
    </p>

    <p>Color settings</p>
    
    <p>Background color*:
      <select id="color_select">
        <option value="gray">Gray</option>
        <option value="blue ">Blue</option>
        <option value="green">Green</option>
        <option value="red">Red</option>
      </select>
    </p>

    <p>
      <button id="save_button">Save</button>
      <button id="cancel_button">Cancel</button>
    </p>

    <script>
      function saveOptions() {
        var options = {}
        //Add all textual values
        $('textarea, select, [type="hidden"], [type="password"], [type="text"]').each(function(){options[$(this).attr('id')] = $(this).val();})
        //Add all checkbox type values
        $('[type="radio"], [type="checkbox"]').each(function(){options[$(this).attr('id')] = $(this).is(':checked');})
        return options;
      }
      
      
      var submitButton = document.getElementById("save_button");
      submitButton.addEventListener("click",
        function() {
          console.log("Submit");
          
          var options = saveOptions();
          var location = "pebblejs://close#" + encodeURIComponent(JSON.stringify(options));
          
          document.location = location;
        },
        false
      );
    </script>
  </body>
</html>
